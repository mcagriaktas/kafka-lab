# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

############################# KRaft Broker Mode Settings #########################
##################################################################################

############################# Socket Server Settings #############################
# Basic KRaft Broker Settings
process.roles=broker
node.id=1

# The address the socket server listens on.
listeners=BROKER://0.0.0.0:9092
advertised.listeners=BROKER://broker1.dahbest.kfn:9092

# KRaft Controller Quorum Mapping
controller.quorum.voters=3001@controller1.dahbest.kfn:9093,3002@controller2.dahbest.kfn:9093,3003@controller3.dahbest.kfn:9093
controller.listener.names=CONTROLLER

# Security Protocol Mapping
listener.security.protocol.map=BROKER:SASL_SSL,CONTROLLER:SASL_SSL
inter.broker.listener.name=BROKER

############################# Authentication #############################
# SSL settings
ssl.keystore.location=/opt/kafka/config/jks/broker1.keystore.jks
ssl.keystore.password=cagri3541
ssl.key.password=cagri3541
ssl.truststore.location=/opt/kafka/config/jks/broker1.truststore.jks
ssl.truststore.password=cagri3541

# SASL_SSL Configuration
sasl.enabled.mechanisms=GSSAPI,SCRAM-SHA-256
sasl.mechanism.controller.protocol=GSSAPI
listener.name.broker.sasl.kerberos.service.name=kafka
listener.name.controller.sasl.kerberos.service.name=controller

# Authorization
authorizer.class.name=org.apache.kafka.metadata.authorizer.StandardAuthorizer
super.users=User:kafka
allow.everyone.if.no.acl.found=false
inter.broker.protocol.version=4.0

############################# Internal Topic Settings  #############################
# Cluster Topics Configs
default.replication.factor=3
min.insync.replicas=2
num.partitions=3
num.replica.fetchers=3

offsets.topic.replication.factor=3
offsets.topic.num.partitions=50

transaction.state.log.replication.factor=3
transaction.state.log.min.isr=2
transaction.state.log.num.partitions=50

log.retention.hours=24

auto.leader.rebalance.enable=true
leader.imbalance.check.interval.seconds=300

############################# Networks #############################
# Socket buffer settings
socket.receive.buffer.bytes=102400
socket.send.buffer.bytes=102400
socket.request.max.bytes=419430400

# Network settings
replica.socket.receive.buffer.bytes=1048576
replica.socket.timeout.ms=60000
message.max.bytes=419430400
max.request.size=419430400
fetch.max.bytes=419430400

replica.lag.time.max.ms=30000
replica.socket.timeout.ms=30000
request.timeout.ms=30000

############################# Kafka Metrics #############################
# Metrics Reporter
metric.reporters=org.apache.kafka.common.metrics.JmxReporter
metrics.recording.level=INFO
metrics.sample.window.ms=10000

############################# Log Basics #############################
# Cluster Metadata and Partitions Segment
log.dirs=/opt/data/partitions
metadata.log.dir=/opt/data/metadata

############################# Group Coordinator Settings #############################
# Disable Outside Auto Create
auto.create.topics.enable=false
delete.topic.enable=false